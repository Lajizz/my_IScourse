### 进程通信
多数应用程序是由通信进程对组成，每对中的两个进程互相发送报文。每对中两个进程互相发送报文。从一个进程向另一个进程发送的报文必须经过下面的网络。进程通过一个称为套接字(socket)的软件接口向网络发送报文和从网络接收报文。套接字是同一台主机内应用层与运输层之间的接口。由于该套接字是建立网络应用程序的可编程接口，因此套接字也被称为应用程序和网络之间的应用程序编程接口(Application Programming Interface, API)。应用程序开发者可以控制套接字在应用层端的一切，但是对该套接字的运输层端几乎没有控制权。应用开发者对于运输层的控制权仅限于：
    1. 选择运输层协议
    1. 也许能设定几个运输层的参数

### 因特网提供的运输服务
1. TCP服务：
    - 面向连接的服务：在应用层数据报文开始流动之前，TCP让客户和服务器互相交换运输层控制信息。这个所谓的握手过程提醒客户和服务器，让它们为大量分组的到来做好准备。在握手阶段之后，一个TCP连接就在两个进程的套接字之间建立了。这个阶段是全双工的，即连接双方的进程可以在此连接上同时进行报文收发。当应用程序结束报文发送时，必须拆除该连接。
    - 可靠的数据传送服务：通信进程能够依靠TCP，无差错、按适当顺序交付所有发送的数据。当应用程序一端的字节流传进套接字时，它能够依靠TCP将相同的字节流交付给接收方的套接字，而没有字节的丢失和冗余。
1. UDP服务：
UDP是一种不提供不必要服务的轻量级运输协议，它仅提供最小服务。UDP是无连接的，因此在两个进程通信前没有握手过程。UDP协议提供一种不可靠数据传送服务，也就是说，当进程将一个报文发送进UDP套接字时，UDP协议并不保证该报文将到达接收进程。不仅如此，到达接受进程的报文也可能是乱序到达的。

### Web和HTTP
HTTP使用TCP作为它的支撑运输协议。HTTP客户首先发起一个与服务器的TCP连接。一旦连接建立，该浏览器和服务器进程就可以通过套接字接口访问TCP。  
注意：服务器向客户发送被请求的文件，而不存储任何关于该客户的状态信息，所以说HTTP是一个无状态协议。  
非持续连接：每个请求/响应对是经一个单独的TCP连接发送；持续连接：所有的请求及其响应经相同的TCP连接发送。  
非连续连接的缺点：    
1. 必须为每个请求对象建立和维护一个全新的连接。对于每个这样的连接，在客户端和服务器中都要分配TCP的缓冲区和保持TCP变量，这给Web服务器带来了严重的负担，因为一台Web服务器可能同时服务于数以百计不同的客户的请求。
1. 每一个对象经受两倍RTT的交付时延，即一个RTT用于创建TCP，另一个RTT用于请求和接收一个对象。  
###### HTTP报文格式
1. HTTP请求报文：
    - 请求行：方法字段（GET、POST、HEAD、PUT、DELETE）、URL字段、HTTP版本字段
    - 首部行：
        - HOST：指明对象所在的主机
        - Connection
        - User-agent：首部行用来指明用户代理，即向服务器发送请求的浏览器的类型
    - 实体体
1. HTTP响应报文：
    - 状态行：协议版本字码、状态码、相应状态信息
    - 首部行：
        - Connection
        - Date
        - Server
        - Last-Modified
        - Content-Length
        - Content-Type
    - 实体体
###### Cookie
cookie可以用于标识一个用户。用户首次访问一个站点时，可能需要提供一个用户标识。在后继的会话中，浏览器向服务器传递一个cookie首部，从而向该服务器标识了用户。因此coolie可以在无状态的HTTP之上建立一个用户会话层。
###### Web缓存
Wen缓存器也叫代理服务器，它是能够代表初始Web服务器来满足HTTP请求的网络实体。Web缓存器有自己的磁盘空间，并在存储空间中保存最近请求过的对象的副本。

### 因特网中的电子邮件
主要组成部分：用户代理、邮件服务器、简单邮件传输协议(SMTP)  

###### SMTP
SMTP从一个邮件服务器向另一个邮件服务器传送文件，使用持续连接。SMTP是一个推协议，即发送邮件服务器把文件推向接收邮件服务器。SMTP要求每个报文采用7比特ASCII码格式。  
SMTP用来将邮件从发送方的邮件服务器传输到接收方的邮件服务器；SMTP也用来将邮件从发送方的用户代理传输到发送方的邮件服务器；如POP3这样的邮件访问协议用来将邮件从接收方的邮件服务器传送到接收方的用户代理。

###### POP3
POP3按照三个阶段进行工作：特许，事务处理及更新；  
- 特许：用户代理发送（以明文形式）用户名和口令以鉴别用户
- 事务处理：用户代理取回报文；同时在这个阶段，用户代理还能对报文做删除标记，取消报文删除标记，以及获取邮件的统计信息
- 更新：出现在用户发出quit指令以后，目的是结束该POP3会话；这时，该邮件服务器删除那些被标记为删除的报文  

### DNS：因特网的目录服务
主机的一种标识方法是用它的主机名；然而主机名可能由不定长的字母数字组成，路由器难以处理，所以主机名也可以用所谓的IP地址标识。  

###### DNS提供的服务
域名系统(DNS)的主要任务是一种将主机名转换为路由地址的目录服务，DNS是：
1. 一个由分层的DNS服务器实现的分布式数据库；
1. 一个使得主机能够查询分布式数据库的应用层协议

DNS还提供其他一些重要的服务：
1. 主机别名：有着复杂主机名的主机能拥有一个或者多个别名
1. 邮件服务器别名
1. 负载分配：DNS也用于在冗余的服务器之间进行负载分配。繁忙的站点被冗余分布在多台服务器上，每台服务器均运行在不同的端系统上，每个都有着不同的IP地址。由于这些冗余的Web服务器，一个IP地址集合因此与同一个规范主机名相联系。DNS数据库中存储着这些IP地址集合。当客户对映射到某地址集合的名字发出一个DNS请求时，该服务器用IP地址的整个集合进行响应，但在每个回答中循环这些地址时序

### P2P文件分发
客户-服务器体系结构的最小分发下届：$D_{cs}\ge max\{\frac{NF}{u_s},\frac{F}{d_{min}}\}$  
P2P体系中，每个对等方能够帮助服务器分发该文件。特别是，当一个对等方接收到某些文件数据，它能够使用自己的上载能力重新将数据分发给其他对等方。
P2P最小分发时间：$D_{P2P}\ge max\{\frac{F}{u_s},\frac{F}{d_{min}},\frac{NF}{u_s+\sum_{i=1}^Nu_i}\}$