# 运输层
运输层协议为运行在不同主机上的应用进程提供了逻辑通信功能。  
运输层协议是在端系统中而不是在路由器中实现的。在发送端，运输层将从发送应用程序进程接收到的报文转换成运输层分组，该分组称为运输层报文段。然后，在发送端系统中，运输层将这些报文段传输给网络层，网络层将其封装为网络层分组（即数据报）并向目的地发送。  
网络路由器仅作用于该数据报的网络层字段；即它们不检查封装在该数据报的运输层报文段的字段。  
网络层提供了主机之间的逻辑通信，而运输层为运行在不同主机上的进程之间提供了逻辑通信。  

### 多路复用与多路分解
多路分解：将运输层报文段中的数据交付到正确的套接字工作  
多路复用：在源主机从不同套接字，并为每个数据块封装上首部信息从而生成报文段，然后将报文段传递到网络层，所有这些工作称为多路复用  
运输层多路复用的要求：
1. 套接字有唯一标识符
1. 每个报文段有特殊字段来指示该报文段所要交付的套接字，这些特殊字段是源端口号字段和目的端口号字段

一个UDP套接字是由一个二元组全面标识的，该二元组包含一个目的IP地址和一个目的端口号。  
TCP套接字是由一个四元组（源IP地址，源端口号，目的IP地址，目的端口号）来标识的。

### 无连接运输：UDP
UDP从应用进程得到数据，附加上用于多路复用/多路分解服务的源和目的端口号字段，以及两个其他的小字段，然后将形成的报文段交给网络层。网络层则将该运输层报文段封装到一个IP数据报中，然后尽力而为地尝试将该报文段交付给接收主机。如果该报文段到达接收主机，UDP使用目的端口号将报文段中地数据交付给正确地应用进程。值得注意的是，使用UDP时，在发送报文段之前，发送方和接收方的运输层实体之间没有握手。正因为如此，UDP被称为是无连接的。  
许多程序使用UDP的原因：
1. 关于发送什么数据以及何时发送的应用层控制更为精细
1. 无需连接建立
1. 无连接状态
1. 分组首部开销小

- UDP检验和用于确定当UDP报文段从源到达目的地移动时，其中的比特是否发生改变

### 可靠数据传输原理
自动重传请求（ARQ）协议：  
在计算机网络中，基于重传机制的可靠数据传输协议被称为自动重传请求协议。ARQ协议中还需要另外三种协议功能来处理存在比特差错的情况：  
- 差错检测
- 接收方反馈
- 重传